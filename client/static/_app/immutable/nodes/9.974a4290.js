import{S as ze,i as Fe,s as We,k as i,q as A,a as b,y as se,l as m,m as f,r as L,h as c,c as v,z as re,n as r,b as qe,L as e,A as ne,G as Be,ai as Je,u as ke,g as R,d as F,f as Ke,B as le,P as Qe,H as Xe,o as Ye,v as Ze}from"../chunks/index.7bf39313.js";import{b as xe,C as et,R as Re}from"../chunks/constant.407e1c3c.js";import{c as tt,p as De,g as He}from"../chunks/pocketbase.c6bc3d05.js";import{I as Ve}from"../chunks/icon.75f33e0e.js";import{S as at,G as st}from"../chunks/google-btn.f7b7123c.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.6842832c.js";import{P as rt}from"../chunks/ProgressRadial.50bf0d72.js";function Ge(n){let t,s=n[0].message+"",l;return{c(){t=i("p"),l=A(s),this.h()},l(h){t=m(h,"P",{class:!0});var w=f(t);l=L(w,s),w.forEach(c),this.h()},h(){r(t,"class","text-error-500")},m(h,w){qe(h,t,w),e(t,l)},p(h,w){w&1&&s!==(s=h[0].message+"")&&ke(l,s)},d(h){h&&c(t)}}}function je(n){let t,s;return t=new rt({props:{width:"w-4",stroke:150,track:"stroke-secondary-500/30"}}),{c(){se(t.$$.fragment)},l(l){re(t.$$.fragment,l)},m(l,h){ne(t,l,h),s=!0},i(l){s||(R(t.$$.fragment,l),s=!0)},o(l){F(t.$$.fragment,l),s=!1},d(l){le(t,l)}}}function nt(n){let t,s,l,h,w,k,E,T,d,$,U,x,p,y,D,H,P,M=n[4](n[5].EmailOrUsername)+"",S,W,g,ee,ue,fe,N,V,oe,de,C,B,pe,J,te=n[4](n[5].Password)+"",ie,he,O,ae,_e,ge,be,K,Q,ve,G,we,Ee,j,$e,q,I,ye,Pe;k=new Ve({props:{name:"cat",class:"text-purple-600",width:"48px",height:"48px"}});let _=n[0]?.code=="unknown"&&Ge(n);B=new Ve({props:{name:n[2]?"eye":"eye-hide",width:"24px",height:"24px"}});let u=n[1]&&je();return j=new at({props:{text:"OR"}}),q=new st({}),{c(){t=i("div"),s=i("div"),l=i("h1"),h=A("Sign In"),w=b(),se(k.$$.fragment),E=b(),_&&_.c(),T=b(),d=i("form"),$=i("label"),U=i("small"),x=A("Email address or username"),p=b(),y=i("input"),H=b(),P=i("small"),S=A(M),W=b(),g=i("label"),ee=i("small"),ue=A("Password"),fe=b(),N=i("div"),V=i("input"),de=b(),C=i("button"),se(B.$$.fragment),pe=b(),J=i("small"),ie=A(te),he=b(),O=i("button"),ae=i("span"),_e=A("SUBMIT"),ge=b(),u&&u.c(),be=b(),K=i("div"),Q=i("span"),ve=A("Not registered? "),G=i("a"),we=A("Create Account"),Ee=b(),se(j.$$.fragment),$e=b(),se(q.$$.fragment),this.h()},l(a){t=m(a,"DIV",{class:!0});var o=f(t);s=m(o,"DIV",{class:!0});var z=f(s);l=m(z,"H1",{class:!0});var Se=f(l);h=L(Se,"Sign In"),Se.forEach(c),w=v(z),re(k.$$.fragment,z),z.forEach(c),E=v(o),_&&_.l(o),T=v(o),d=m(o,"FORM",{method:!0,class:!0});var X=f(d);$=m(X,"LABEL",{class:!0});var Y=f($);U=m(Y,"SMALL",{});var Ue=f(U);x=L(Ue,"Email address or username"),Ue.forEach(c),p=v(Y),y=m(Y,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),H=v(Y),P=m(Y,"SMALL",{class:!0});var Ie=f(P);S=L(Ie,M),Ie.forEach(c),Y.forEach(c),W=v(X),g=m(X,"LABEL",{class:!0});var Z=f(g);ee=m(Z,"SMALL",{});var Ae=f(ee);ue=L(Ae,"Password"),Ae.forEach(c),fe=v(Z),N=m(Z,"DIV",{class:!0});var me=f(N);V=m(me,"INPUT",{type:!0,name:!0,placeholder:!0}),de=v(me),C=m(me,"BUTTON",{class:!0,type:!0});var Le=f(C);re(B.$$.fragment,Le),Le.forEach(c),me.forEach(c),pe=v(Z),J=m(Z,"SMALL",{class:!0});var Te=f(J);ie=L(Te,te),Te.forEach(c),Z.forEach(c),he=v(X),O=m(X,"BUTTON",{type:!0,class:!0});var ce=f(O);ae=m(ce,"SPAN",{});var Me=f(ae);_e=L(Me,"SUBMIT"),Me.forEach(c),ge=v(ce),u&&u.l(ce),ce.forEach(c),X.forEach(c),be=v(o),K=m(o,"DIV",{class:!0});var Ne=f(K);Q=m(Ne,"SPAN",{});var Oe=f(Q);ve=L(Oe,"Not registered? "),G=m(Oe,"A",{href:!0,class:!0});var Ce=f(G);we=L(Ce,"Create Account"),Ce.forEach(c),Oe.forEach(c),Ne.forEach(c),Ee=v(o),re(j.$$.fragment,o),$e=v(o),re(q.$$.fragment,o),o.forEach(c),this.h()},h(){r(l,"class","h1"),r(s,"class","inline-flex items-center"),r(y,"class",D=n[3]([n[5].EmailOrUsername,"unknown"])),r(y,"type","text"),r(y,"name",n[5].EmailOrUsername),r(y,"placeholder","johncena@example.com"),r(P,"class","text-error-500"),r($,"class","label"),r(V,"type",oe=n[2]?"text":"password"),r(V,"name",n[5].Password),r(V,"placeholder","Password"),r(C,"class","btn btn-sm variant-filled-surface"),r(C,"type","button"),r(N,"class","input-group input-group-divider grid-cols-[1fr_auto]"),r(J,"class","text-error-500"),r(g,"class","label"),r(O,"type","submit"),O.disabled=n[1],r(O,"class","btn btn-sm variant-filled"),r(d,"method","POST"),r(d,"class","space-y-2"),r(G,"href",xe),r(G,"class","anchor"),r(K,"class","w-full"),r(t,"class","card p-4 max-w-[400px] mx-auto space-y-4 my-4")},m(a,o){qe(a,t,o),e(t,s),e(s,l),e(l,h),e(s,w),ne(k,s,null),e(t,E),_&&_.m(t,null),e(t,T),e(t,d),e(d,$),e($,U),e(U,x),e($,p),e($,y),e($,H),e($,P),e(P,S),e(d,W),e(d,g),e(g,ee),e(ee,ue),e(g,fe),e(g,N),e(N,V),e(N,de),e(N,C),ne(B,C,null),e(g,pe),e(g,J),e(J,ie),e(d,he),e(d,O),e(O,ae),e(ae,_e),e(O,ge),u&&u.m(O,null),e(t,be),e(t,K),e(K,Q),e(Q,ve),e(Q,G),e(G,we),e(t,Ee),ne(j,t,null),e(t,$e),ne(q,t,null),I=!0,ye||(Pe=[Be(C,"click",n[7]),Be(d,"submit",Je(n[6]))],ye=!0)},p(a,[o]){a[0]?.code=="unknown"?_?_.p(a,o):(_=Ge(a),_.c(),_.m(t,T)):_&&(_.d(1),_=null),(!I||o&8&&D!==(D=a[3]([a[5].EmailOrUsername,"unknown"])))&&r(y,"class",D),(!I||o&16)&&M!==(M=a[4](a[5].EmailOrUsername)+"")&&ke(S,M),(!I||o&4&&oe!==(oe=a[2]?"text":"password"))&&r(V,"type",oe);const z={};o&4&&(z.name=a[2]?"eye":"eye-hide"),B.$set(z),(!I||o&16)&&te!==(te=a[4](a[5].Password)+"")&&ke(ie,te),a[1]?u?o&2&&R(u,1):(u=je(),u.c(),R(u,1),u.m(O,null)):u&&(Ze(),F(u,1,1,()=>{u=null}),Ke()),(!I||o&2)&&(O.disabled=a[1])},i(a){I||(R(k.$$.fragment,a),R(B.$$.fragment,a),R(u),R(j.$$.fragment,a),R(q.$$.fragment,a),I=!0)},o(a){F(k.$$.fragment,a),F(B.$$.fragment,a),F(u),F(j.$$.fragment,a),F(q.$$.fragment,a),I=!1},d(a){a&&c(t),le(k),_&&_.d(),le(B),u&&u.d(),le(j),le(q),ye=!1,Qe(Pe)}}}function lt(n,t,s){let l,h,w;Xe(n,tt,p=>s(8,w=p));var k=(p=>(p.EmailOrUsername="emailOrUsername",p.Password="password",p))(k||{});let E,T=!1;const d=(p="unknown",y="")=>(s(0,E={code:p,message:y}),E),$=async p=>{const y=p.target,D=new FormData(y),H=D.get("emailOrUsername")?.toString()?.toLowerCase(),P=D.get("password")?.toString();if(!H||H=="")return d("emailOrUsername","Email or username can not be empty.");if(!P||P=="")return d("password","Password can not be empty.");try{s(1,T=!0);const{token:M,record:S}=await De.collection("users").authWithPassword(H,P);De.authStore.exportToCookie(et),He(Re)}catch(M){const S=M.response.data,W=["emailOrUsername","password"];if(S!==void 0&&W.includes(Object.keys(S).pop()||""))for(const g of W)S[g]!==void 0&&d(g,S[g].message);else d("unknown","Failed signin in.")}finally{s(1,T=!1)}};let U=!1;Ye(()=>{w?.id&&He(Re)});const x=()=>{s(2,U=!U)};return n.$$.update=()=>{n.$$.dirty&1&&s(4,l=p=>E?.code&&E.code==p?E.message:""),n.$$.dirty&1&&s(3,h=p=>`input  ${E?.code&&p.includes(E.code)?"input-error":""}`)},[E,T,U,h,l,k,$,x]}class pt extends ze{constructor(t){super(),Fe(this,t,lt,nt,We,{})}}export{pt as component};
