import{S as Ta,i as Oa,s as Da,k as l,q as S,a as d,y as _e,l as n,m as u,r as y,h as o,c as h,z as ge,n as a,b as Ma,L as e,A as ve,G as ka,ai as Na,u as Ue,g as V,d as X,f as ja,B as we,P as Ba,H as Ra,o as Va,v as Ga,w as Ha}from"../chunks/index.7bf39313.js";import{c as qa,p as Sa,g as ya}from"../chunks/pocketbase.c6bc3d05.js";import{S as za,G as Fa}from"../chunks/google-btn.f7b7123c.js";import{I as Aa}from"../chunks/icon.75f33e0e.js";import{L as Ja,C as Qa,R as Ua}from"../chunks/constant.407e1c3c.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.6842832c.js";import{F as Wa}from"../chunks/FileDropzone.8d30152e.js";import{P as Xa}from"../chunks/ProgressRadial.50bf0d72.js";function Ca(s){let r,m=s[0].message+"",p;return{c(){r=l("p"),p=S(m),this.h()},l(g){r=n(g,"P",{class:!0});var P=u(r);p=y(P,m),P.forEach(o),this.h()},h(){a(r,"class","text-error-500")},m(g,P){Ma(g,r,P),e(r,p)},p(g,P){P&1&&m!==(m=g[0].message+"")&&Ue(p,m)},d(g){g&&o(r)}}}function Ia(s){let r,m;return r=new Xa({props:{width:"w-4",stroke:150,track:"stroke-secondary-500/30"}}),{c(){_e(r.$$.fragment)},l(p){ge(r.$$.fragment,p)},m(p,g){ve(r,p,g),m=!0},i(p){m||(V(r.$$.fragment,p),m=!0)},o(p){X(r.$$.fragment,p),m=!1},d(p){we(r,p)}}}function Ya(s){let r,m,p,g,P,M,A,G,i,U,N,j,be,T,se,f,E,L=s[5](s[6].Username)+"",k,Y,b,H,te,B,I,q,Re,re,Ee=s[5](s[6].Email)+"",Ce,Ve,O,$e,Ge,He,z,Z,Ie,qe,F,J,ze,le,Pe=s[5](s[6].Password)+"",Me,Fe,D,Le,Je,Qe,R,Te,Oe,We,ne,ke=s[5](s[6].PasswordConfirm)+"",De,Xe,Se,Ye,Q,ye,oe,ie,Ze,W,Ke,C,Ae,xe,ea,aa,ue,me,sa,K,ta,ra,x,la,ce,ee,$,na,ia;M=new Aa({props:{name:"cat",class:"text-purple-600",width:"48px",height:"48px"}});let v=s[0]?.code=="unknown"&&Ca(s);J=new Aa({props:{name:s[2]?"eye":"eye-hide",width:"24px",height:"24px"}}),W=new Wa({props:{accept:".jpg, .jpeg, .png, .webp, .gif",name:s[6].Avatar,class:"text-sm"}}),W.$on("change",s[8]);let _=s[1]&&Ia();return x=new za({props:{text:"OR"}}),ee=new Fa({}),{c(){r=l("div"),m=l("div"),p=l("h1"),g=S("Sign Up"),P=d(),_e(M.$$.fragment),A=d(),v&&v.c(),G=d(),i=l("form"),U=l("label"),N=l("small"),j=S("Username"),be=d(),T=l("input"),f=d(),E=l("small"),k=S(L),Y=d(),b=l("label"),H=l("small"),te=S("Email Address"),B=d(),I=l("input"),Re=d(),re=l("small"),Ce=S(Ee),Ve=d(),O=l("label"),$e=l("small"),Ge=S("Password"),He=d(),z=l("div"),Z=l("input"),qe=d(),F=l("button"),_e(J.$$.fragment),ze=d(),le=l("small"),Me=S(Pe),Fe=d(),D=l("label"),Le=l("small"),Je=S("Confirm Password"),Qe=d(),R=l("input"),We=d(),ne=l("small"),De=S(ke),Xe=d(),Se=l("div"),Ye=d(),Q=l("div"),ye=l("span"),oe=l("figure"),ie=l("img"),Ze=d(),_e(W.$$.fragment),Ke=d(),C=l("button"),Ae=l("span"),xe=S("SUBMIT"),ea=d(),_&&_.c(),aa=d(),ue=l("div"),me=l("span"),sa=S("Already have an account? "),K=l("a"),ta=S("Sign in here"),ra=d(),_e(x.$$.fragment),la=d(),ce=l("div"),_e(ee.$$.fragment),this.h()},l(t){r=n(t,"DIV",{class:!0});var c=u(r);m=n(c,"DIV",{class:!0});var ae=u(m);p=n(ae,"H1",{class:!0});var ua=u(p);g=y(ua,"Sign Up"),ua.forEach(o),P=h(ae),ge(M.$$.fragment,ae),ae.forEach(o),A=h(c),v&&v.l(c),G=h(c),i=n(c,"FORM",{method:!0,class:!0});var w=u(i);U=n(w,"LABEL",{class:!0});var fe=u(U);N=n(fe,"SMALL",{});var ma=u(N);j=y(ma,"Username"),ma.forEach(o),be=h(fe),T=n(fe,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),f=h(fe),E=n(fe,"SMALL",{class:!0});var ca=u(E);k=y(ca,L),ca.forEach(o),fe.forEach(o),Y=h(w),b=n(w,"LABEL",{class:!0});var pe=u(b);H=n(pe,"SMALL",{});var fa=u(H);te=y(fa,"Email Address"),fa.forEach(o),B=h(pe),I=n(pe,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),Re=h(pe),re=n(pe,"SMALL",{class:!0});var pa=u(re);Ce=y(pa,Ee),pa.forEach(o),pe.forEach(o),Ve=h(w),O=n(w,"LABEL",{class:!0});var de=u(O);$e=n(de,"SMALL",{});var da=u($e);Ge=y(da,"Password"),da.forEach(o),He=h(de),z=n(de,"DIV",{class:!0});var Ne=u(z);Z=n(Ne,"INPUT",{type:!0,name:!0,placeholder:!0}),qe=h(Ne),F=n(Ne,"BUTTON",{class:!0,type:!0});var ha=u(F);ge(J.$$.fragment,ha),ha.forEach(o),Ne.forEach(o),ze=h(de),le=n(de,"SMALL",{class:!0});var _a=u(le);Me=y(_a,Pe),_a.forEach(o),de.forEach(o),Fe=h(w),D=n(w,"LABEL",{class:!0});var he=u(D);Le=n(he,"SMALL",{});var ga=u(Le);Je=y(ga,"Confirm Password"),ga.forEach(o),Qe=h(he),R=n(he,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),We=h(he),ne=n(he,"SMALL",{class:!0});var va=u(ne);De=y(va,ke),va.forEach(o),he.forEach(o),Xe=h(w),Se=n(w,"DIV",{class:!0}),u(Se).forEach(o),Ye=h(w),Q=n(w,"DIV",{class:!0});var je=u(Q);ye=n(je,"SPAN",{});var wa=u(ye);oe=n(wa,"FIGURE",{class:!0});var ba=u(oe);ie=n(ba,"IMG",{class:!0,alt:!0}),ba.forEach(o),wa.forEach(o),Ze=h(je),ge(W.$$.fragment,je),je.forEach(o),Ke=h(w),C=n(w,"BUTTON",{type:!0,class:!0});var Be=u(C);Ae=n(Be,"SPAN",{});var Ea=u(Ae);xe=y(Ea,"SUBMIT"),Ea.forEach(o),ea=h(Be),_&&_.l(Be),Be.forEach(o),aa=h(w),ue=n(w,"DIV",{class:!0});var $a=u(ue);me=n($a,"SPAN",{});var oa=u(me);sa=y(oa,"Already have an account? "),K=n(oa,"A",{href:!0,class:!0});var Pa=u(K);ta=y(Pa,"Sign in here"),Pa.forEach(o),oa.forEach(o),$a.forEach(o),w.forEach(o),ra=h(c),ge(x.$$.fragment,c),la=h(c),ce=n(c,"DIV",{class:!0});var La=u(ce);ge(ee.$$.fragment,La),La.forEach(o),c.forEach(o),this.h()},h(){a(p,"class","h1"),a(m,"class","inline-flex items-center"),a(T,"class",se=s[4]([s[6].Username,"unknown"])),a(T,"type","text"),a(T,"name",s[6].Username),a(T,"placeholder","johncena911"),a(E,"class","text-error-500"),a(U,"class","label"),a(I,"class",q=s[4]([s[6].Email,"unknown"])),a(I,"type","email"),a(I,"name",s[6].Email),a(I,"placeholder","johnchena@chinamail.com"),a(re,"class","text-error-500"),a(b,"class","label"),a(Z,"type",Ie=s[2]?"text":"password"),a(Z,"name",s[6].Password),a(Z,"placeholder","Password"),a(F,"class","btn btn-sm variant-filled-surface"),a(F,"type","button"),a(z,"class","input-group input-group-divider grid-cols-[1fr_auto]"),a(le,"class","text-error-500"),a(O,"class","label"),a(R,"class",Te=s[4]([s[6].PasswordConfirm,"unknown"])),a(R,"type",Oe=s[2]?"text":"password"),a(R,"name",s[6].PasswordConfirm),a(R,"placeholder","Must be the same as password"),a(ne,"class","text-error-500"),a(D,"class","label"),a(Se,"class","h-1"),a(ie,"class","aspect-square object-cover object-center"),a(ie,"alt",""),a(oe,"class","avatar flex aspect-square justify-center items-center overflow-hidden bg-surface-400-500-token w-16 h-16 rounded-full"),a(Q,"class","inline-flex gap-2 w-full"),a(C,"type","submit"),C.disabled=s[1],a(C,"class","btn variant-filled"),a(K,"href",Ja),a(K,"class","anchor"),a(ue,"class","w-full"),a(i,"method","POST"),a(i,"class","space-y-2"),a(ce,"class","space-y-2"),a(r,"class","card p-4 max-w-[400px] mx-auto space-y-4 my-4")},m(t,c){Ma(t,r,c),e(r,m),e(m,p),e(p,g),e(m,P),ve(M,m,null),e(r,A),v&&v.m(r,null),e(r,G),e(r,i),e(i,U),e(U,N),e(N,j),e(U,be),e(U,T),e(U,f),e(U,E),e(E,k),e(i,Y),e(i,b),e(b,H),e(H,te),e(b,B),e(b,I),e(b,Re),e(b,re),e(re,Ce),e(i,Ve),e(i,O),e(O,$e),e($e,Ge),e(O,He),e(O,z),e(z,Z),e(z,qe),e(z,F),ve(J,F,null),e(O,ze),e(O,le),e(le,Me),e(i,Fe),e(i,D),e(D,Le),e(Le,Je),e(D,Qe),e(D,R),e(D,We),e(D,ne),e(ne,De),e(i,Xe),e(i,Se),e(i,Ye),e(i,Q),e(Q,ye),e(ye,oe),e(oe,ie),s[10](ie),e(Q,Ze),ve(W,Q,null),e(i,Ke),e(i,C),e(C,Ae),e(Ae,xe),e(C,ea),_&&_.m(C,null),e(i,aa),e(i,ue),e(ue,me),e(me,sa),e(me,K),e(K,ta),e(r,ra),ve(x,r,null),e(r,la),e(r,ce),ve(ee,ce,null),$=!0,na||(ia=[ka(F,"click",s[9]),ka(i,"submit",Na(s[7]))],na=!0)},p(t,[c]){t[0]?.code=="unknown"?v?v.p(t,c):(v=Ca(t),v.c(),v.m(r,G)):v&&(v.d(1),v=null),(!$||c&16&&se!==(se=t[4]([t[6].Username,"unknown"])))&&a(T,"class",se),(!$||c&32)&&L!==(L=t[5](t[6].Username)+"")&&Ue(k,L),(!$||c&16&&q!==(q=t[4]([t[6].Email,"unknown"])))&&a(I,"class",q),(!$||c&32)&&Ee!==(Ee=t[5](t[6].Email)+"")&&Ue(Ce,Ee),(!$||c&4&&Ie!==(Ie=t[2]?"text":"password"))&&a(Z,"type",Ie);const ae={};c&4&&(ae.name=t[2]?"eye":"eye-hide"),J.$set(ae),(!$||c&32)&&Pe!==(Pe=t[5](t[6].Password)+"")&&Ue(Me,Pe),(!$||c&16&&Te!==(Te=t[4]([t[6].PasswordConfirm,"unknown"])))&&a(R,"class",Te),(!$||c&4&&Oe!==(Oe=t[2]?"text":"password"))&&a(R,"type",Oe),(!$||c&32)&&ke!==(ke=t[5](t[6].PasswordConfirm)+"")&&Ue(De,ke),t[1]?_?c&2&&V(_,1):(_=Ia(),_.c(),V(_,1),_.m(C,null)):_&&(Ga(),X(_,1,1,()=>{_=null}),ja()),(!$||c&2)&&(C.disabled=t[1])},i(t){$||(V(M.$$.fragment,t),V(J.$$.fragment,t),V(W.$$.fragment,t),V(_),V(x.$$.fragment,t),V(ee.$$.fragment,t),$=!0)},o(t){X(M.$$.fragment,t),X(J.$$.fragment,t),X(W.$$.fragment,t),X(_),X(x.$$.fragment,t),X(ee.$$.fragment,t),$=!1},d(t){t&&o(r),we(M),v&&v.d(),we(J),s[10](null),we(W),_&&_.d(),we(x),we(ee),na=!1,Ba(ia)}}}function Za(s,r,m){let p,g,P;Ra(s,qa,f=>m(11,P=f));var M=(f=>(f.Email="email",f.Username="username",f.Password="password",f.PasswordConfirm="passwordConfirm",f.Avatar="avatar",f))(M||{});let A,G=!1;const i=(f="unknown",E="")=>(m(0,A={code:f,message:E}),A),U=async f=>{const E=f.target,L=new FormData(E),k=L.get("email")?.toString().trim().toLowerCase(),Y=L.get("username")?.toString().trim().toLowerCase(),b=L.get("password")?.toString().trim(),H=L.get("passwordConfirm")?.toString().trim();if(!k||k=="")return i("email","Email address can not be empty.");if(!Y||Y=="")return i("username","Username can not be empty.");if(!b||b=="")return i("password","Password can not be empty.");if(b!==H)return i("password","Password and confirm password do not match.");try{m(1,G=!0);const{token:te,record:B}=await Sa.collection("users").create({email:k,username:Y,name,password:b,passwordConfirm:H});Sa.authStore.exportToCookie(Qa),ya(Ua)}catch(te){const B=te.response.data,I=["email","username","password","passwordConfirm"];if(B!==void 0&&I.includes(Object.keys(B).pop()||""))for(const q of I)B[q]!==void 0&&i(q,B[q].message);else i("unknown","Failed to sign up.")}finally{m(1,G=!1)}};let N=!1,j;const be=f=>{const E=f.target,L=E?.files!=null&&E?.files.length>0?E.files[0]:null;if(L){const k=new FileReader;k.addEventListener("load",()=>{j&&k.result&&j.setAttribute("src",k.result)}),k.readAsDataURL(L);return}};Va(()=>{P?.id&&ya(Ua)});const T=()=>{m(2,N=!N)};function se(f){Ha[f?"unshift":"push"](()=>{j=f,m(3,j)})}return s.$$.update=()=>{s.$$.dirty&1&&m(5,p=f=>A?.code&&A.code==f?A.message:""),s.$$.dirty&1&&m(4,g=f=>`input  ${A?.code&&f.includes(A.code)?"input-error":""}`)},[A,G,N,j,g,p,M,U,be,T,se]}class ns extends Ta{constructor(r){super(),Oa(this,r,Za,Ya,Da,{})}}export{ns as component};
